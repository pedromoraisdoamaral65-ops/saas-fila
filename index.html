<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlowPro S.A. | Elite Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-body: #0d1117;
            --bg-card: #161b22;
            --neon-green: #00ff88;
            --text-main: #f0f6fc;
            --text-sub: #8b949e;
            --border: #30363d;
            --danger: #ff4d4d;
            --wa-green: #25d366;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            background: var(--bg-body); 
            color: var(--text-main); 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            padding-bottom: 80px; /* Espa√ßo para menu mobile */
        }

        /* --- AUTH SCREENS --- */
        .auth-container { display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        .auth-card { 
            background: var(--bg-card); 
            border: 1px solid var(--border); 
            padding: 32px; 
            border-radius: 24px; 
            width: 100%; 
            max-width: 400px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }
        .auth-logo { font-size: 28px; font-weight: 800; color: var(--neon-green); margin-bottom: 8px; }
        .auth-sub { color: var(--text-sub); font-size: 14px; margin-bottom: 32px; }

        input { 
            width: 100%; background: #0d1117; border: 1px solid var(--border); 
            padding: 16px; border-radius: 12px; color: white; margin-bottom: 16px; 
            font-size: 15px; outline: none;
        }
        input:focus { border-color: var(--neon-green); }

        .btn-main { 
            width: 100%; background: var(--neon-green); color: #000; border: none; 
            padding: 16px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 16px;
        }

        /* --- DASHBOARD LAYOUT --- */
        #dashboard-page { display: none; padding: 20px; max-width: 1200px; margin: 0 auto; }
        
        .top-nav { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .user-greeting { font-size: 20px; font-weight: 700; }
        .user-greeting span { color: var(--text-sub); display: block; font-size: 13px; font-weight: 400; }

        .balance-card { 
            background: var(--bg-card); border: 1px solid var(--border); 
            padding: 24px; border-radius: 20px; margin-bottom: 24px;
        }
        .balance-label { color: var(--text-sub); font-size: 14px; margin-bottom: 8px; }
        .balance-value { font-size: 32px; font-weight: 800; color: var(--neon-green); }

        .grid-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .card-box { 
            background: var(--bg-card); border: 1px solid var(--border); 
            padding: 24px; border-radius: 20px;
        }
        .card-title { font-size: 16px; font-weight: 600; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }

        /* LISTS */
        .list-item { 
            display: flex; justify-content: space-between; align-items: center; 
            background: #0d1117; border: 1px solid var(--border); padding: 16px; 
            border-radius: 16px; margin-bottom: 12px;
        }
        .item-info b { display: block; font-size: 15px; }
        .item-info span { color: var(--neon-green); font-size: 13px; font-weight: 600; }

        .action-btns { display: flex; gap: 8px; }
        .btn-sm { padding: 8px 12px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; font-size: 12px; }
        .btn-ok { background: var(--neon-green); color: #000; }
        .btn-del { background: rgba(255, 77, 77, 0.1); color: var(--danger); }
        .btn-wa { background: var(--wa-green); color: #fff; text-decoration: none; }

        /* MENU MOBILE (Estilo print 1000051936) */
        .bottom-menu {
            position: fixed; bottom: 0; left: 0; right: 0; 
            background: var(--bg-card); border-top: 1px solid var(--border);
            display: flex; justify-content: space-around; padding: 15px;
            z-index: 100;
        }
        .menu-icon { text-align: center; color: var(--text-sub); font-size: 11px; cursor: pointer; }
        .menu-icon.active { color: var(--neon-green); }
    </style>
</head>
<body>

    <div id="login-page" class="auth-container">
        <div class="auth-card">
            <div class="auth-logo">FLOWPRO <span style="color:#fff">S.A.</span></div>
            <div class="auth-sub">Acesse seu dashboard inteligente</div>
            <input type="email" id="l-email" placeholder="E-mail de acesso">
            <input type="password" id="l-pass" placeholder="Sua senha">
            <button class="btn-main" onclick="handleLogin()">ENTRAR AGORA</button>
            <div style="text-align: center; margin-top: 20px;">
                <span class="auth-sub" style="cursor:pointer" onclick="switchPage('signup-page')">N√£o tem conta? <b style="color:var(--neon-green)">Criar uma</b></span>
            </div>
        </div>
    </div>

    <div id="signup-page" class="auth-container" style="display:none">
        <div class="auth-card">
            <div class="auth-logo">CADASTRO</div>
            <div class="auth-sub">Crie sua conta corporativa gratuita</div>
            <input type="text" id="s-name" placeholder="Nome da Barbearia">
            <input type="email" id="s-email" placeholder="E-mail profissional">
            <input type="password" id="s-pass" placeholder="Definir senha">
            <button class="btn-main" onclick="handleSignup()">FINALIZAR CADASTRO</button>
            <div style="text-align: center; margin-top: 20px;">
                <span class="auth-sub" style="cursor:pointer" onclick="switchPage('login-page')">J√° sou cliente? <b style="color:var(--neon-green)">Fazer Login</b></span>
            </div>
        </div>
    </div>

    <div id="dashboard-page">
        <div class="top-nav">
            <div class="user-greeting">
                Ol√°, <span id="user-name-display">Pedro Bssns7</span>
            </div>
            <div class="btn-del" style="padding: 10px; border-radius: 50%;" onclick="location.reload()">üîí</div>
        </div>

        <div class="balance-card">
            <div class="balance-label">Lucro Mensal Total</div>
            <div class="balance-value" id="val-mensal">R$ 0,00</div>
            <div class="auth-sub" style="margin-top: 10px;">Proje√ß√£o Anual: <span id="val-anual" style="color:#fff">R$ 0,00</span></div>
        </div>

        <div class="grid-container">
            <div class="card-box">
                <div class="card-title">üìà M√©tricas de Performance</div>
                <canvas id="mainChart" style="max-height: 200px;"></canvas>
            </div>

            <div class="card-box">
                <div class="card-title">‚è≥ Fila de Espera</div>
                <div style="display: flex; gap: 8px; margin-bottom: 20px;">
                    <input type="text" id="q-name" placeholder="Cliente" style="margin:0; padding:12px">
                    <input type="number" id="q-val" placeholder="R$" style="margin:0; width: 80px; padding:12px">
                    <button class="btn-main" style="width: 50px; padding:0" onclick="addFila()">+</button>
                </div>
                <div id="fila-lista"></div>
            </div>

            <div class="card-box">
                <div class="card-title">üéØ Reativa√ß√£o de Clientes</div>
                <input type="text" id="rem-name" placeholder="Nome do sumido">
                <input type="text" id="rem-tel" placeholder="WhatsApp (DDD+Num)">
                <button class="btn-main" style="background:#30363d; color:#fff" onclick="addRemarketing()">SALVAR LISTA</button>
                <div id="rem-lista" style="margin-top: 20px;"></div>
            </div>
        </div>

        <div class="bottom-menu">
            <div class="menu-icon active">üè†<br>In√≠cio</div>
            <div class="menu-icon">üìä<br>Vendas</div>
            <div class="menu-icon">üë•<br>Clientes</div>
            <div class="menu-icon">‚öôÔ∏è<br>Perfil</div>
        </div>
    </div>

    <script>
        let db = JSON.parse(localStorage.getItem('flowpro_db')) || { users: [], lucro: 0, fila: [], rem: [] };
        let chart;

        function save() { localStorage.setItem('flowpro_db', JSON.stringify(db)); }
        
        function switchPage(id) {
            document.querySelectorAll('.auth-container, #dashboard-page').forEach(p => p.style.display='none');
            document.getElementById(id).style.display = (id === 'dashboard-page') ? 'block' : 'flex';
        }

        function handleSignup() {
            const email = document.getElementById('s-email').value;
            const name = document.getElementById('s-name').value;
            if(!email || !name) return alert("Preencha os campos!");
            db.users.push({ email, name, pass: document.getElementById('s-pass').value });
            save(); alert("Conta configurada!"); switchPage('login-page');
        }

        function handleLogin() {
            const user = db.users.find(u => u.email === document.getElementById('l-email').value);
            if(user) {
                document.getElementById('user-name-display').innerText = user.name;
                switchPage('dashboard-page');
                setTimeout(() => { initChart(); renderAll(); }, 100);
            } else alert("Acesso negado.");
        }

        function addFila() {
            const nome = document.getElementById('q-name').value;
            const valor = parseFloat(document.getElementById('q-val').value);
            if(nome && valor) {
                db.fila.push({ id: Date.now(), nome, valor });
                save(); renderAll();
            }
        }

        function concluir(id) {
            const item = db.fila.find(f => f.id === id);
            db.lucro += item.valor;
            db.fila = db.fila.filter(f => f.id !== id);
            save(); renderAll(); updateChart();
        }

        function addRemarketing() {
            const nome = document.getElementById('rem-name').value;
            const tel = document.getElementById('rem-tel').value;
            if(nome && tel) { db.rem.push({ id: Date.now(), nome, tel }); save(); renderAll(); }
        }

        function renderAll() {
            // Fila
            const fLista = document.getElementById('fila-lista');
            fLista.innerHTML = '';
            db.fila.forEach(f => {
                fLista.innerHTML += `
                    <div class="list-item">
                        <div class="item-info"><b>${f.nome}</b><span>R$ ${f.valor.toFixed(2)}</span></div>
                        <div class="action-btns">
                            <button class="btn-sm btn-ok" onclick="concluir(${f.id})">PAGOU</button>
                            <button class="btn-sm btn-del" onclick="db.fila=db.fila.filter(x=>x.id!==${f.id});save();renderAll()">X</button>
                        </div>
                    </div>`;
            });

            // Remarketing
            const rLista = document.getElementById('rem-lista');
            rLista.innerHTML = '';
            db.rem.forEach(r => {
                const msg = encodeURIComponent(`Ol√° ${r.nome}, sentimos sua falta na barbearia! Vamos agendar?`);
                rLista.innerHTML += `
                    <div class="list-item">
                        <div class="item-info"><b>${r.nome}</b><small>${r.tel}</small></div>
                        <div class="action-btns">
                            <a href="https://wa.me/${r.tel}?text=${msg}" target="_blank" class="btn-sm btn-wa">ZAP</a>
                            <button class="btn-sm btn-del" onclick="db.rem=db.rem.filter(x=>x.id!==${r.id});save();renderAll()">X</button>
                        </div>
                    </div>`;
            });

            // Stats
            document.getElementById('val-mensal').innerText = `R$ ${db.lucro.toLocaleString('pt-BR', {minimumFractionDigits:2})}`;
            document.getElementById('val-anual').innerText = `R$ ${(db.lucro * 12).toLocaleString('pt-BR', {minimumFractionDigits:2})}`;
        }

        function initChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Sem 1', 'Sem 2', 'Sem 3', 'Sem 4'],
                    datasets: [{
                        label: 'Lucro R$',
                        data: [db.lucro*0.2, db.lucro*0.4, db.lucro*0.7, db.lucro],
                        borderColor: '#00ff88',
                        tension: 0.4,
                        fill: true,
                        backgroundColor: 'rgba(0, 255, 136, 0.05)'
                    }]
                },
                options: { plugins: { legend: { display: false } }, scales: { y: { display: false }, x: { grid: { display: false } } } }
            });
        }

        function updateChart() { if(chart) { chart.data.datasets[0].data[3] = db.lucro; chart.update(); } }
    </script>
</body>
</html>
